replytimeout = 2000;
readtimeout = 5000;
writetimeout = 3000;
# define the record waiting time in the queue to be processed
locktimeout = 9000;
#In & out terminator must be defined, otherwise the readTimeout & replyTimeout will be used
outterminator = CR;
interminator = CR;

clear_set {
  extraInput = ignore;
  out "CL \$2";
  in "CL";
  in "AL\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u";
}

status_get {
  # Parameters: 1=CARD, 2=CHAN
  out "ST \$2";
  in "ST\_\$2\_%(\$1:\$2:flow_get.VAL)u\_"
            "%(\$1:\$2:min_get.VAL)d\_"
            "%(\$1:\$2:max_get.VAL)d\_"
            "%(\$1:\$2:Qn_get.VAL)#{1.5N=2|2.5=1|1.5=0|10.N=3|10.0}\_"
            "%(\$1:\$2:kubic_get.VAL)u\_"
            "%u\_"; # last is Liter
}

#status_get {
#  # Parameters: 1=CARD, 2=CHAN
#  out "ST \$2";
#  in "ST\_\$2\_%(\$1:\$2:flow_get.VAL)u\_"
#            "%(\$1:\$2:min_get.VAL)d\_"
#            "%(\$1:\$2:max_get.VAL)d\_"
#            "%(\$1:\$2:Qn_get.VAL)fN\_"
#            "%(\$1:\$2:kubic_get.VAL)u\_"
#            "%u\_"; # last is Liter
#}

# alarm 
alarm_get {
  out "IN";
  in "IN %(\$1:1_alarm.VAL)#{ 1 =1|=0}"
       "%(\$1:2_alarm.VAL)#{ 2 =1|=0}"
       "%(\$1:3_alarm.VAL)#{ 3 =1|=0}"
       "%(\$1:4_alarm.VAL)#{ 4 =1|=0}"
       "%(\$1:5_alarm.VAL)#{ 5 =1|=0}"
       "%(\$1:6_alarm.VAL)#{ 6 =1|=0}"
       "%(\$1:7_alarm.VAL)#{ 7 =1|=0}"
       "%(\$1:8_alarm.VAL)#{ 8 =1|=0}"
       "%(\$1:9_alarm.VAL)#{ 9 =1|=0}"
       "%(\$1:10_alarm.VAL)#{10 =1|=0}"
       "%(\$1:11_alarm.VAL)#{11 =1|=0}"
       "%(\$1:12_alarm.VAL)#{12 =1|=0}"
       "%(\$1:13_alarm.VAL)#{13 =1|=0}"
       "%(\$1:14_alarm.VAL)#{14 =1|=0}"
       "%#{15 =1|=0}";
}

min_set {
  %extraInput = ignore;
  out "SE \$2 %u";
  in "SE\_\$2\_%*u\_%*u\_%*u\_%*s\_%*u\_%*u ";
  in "AL\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u";
  @mismatch{in "SE\_\$2\_%*u\_%*u\_%*u\_%*s\_%*u\_%*u "};
}

max_set {
  extraInput = ignore;
  out "SE \$2 * %u";
  in "SE\_\$2\_%*u\_%*u\_%*u\_%*s\_%*u\_%*u ";
  in "AL\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\%_*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u\_%*u";
  @mismatch{in "SE\_\$2\_%*u\_%*u\_%*u\_%*s\_%*u\_%*u "};
}

Qn_set {
  extraInput = ignore;
  out "SE \$2 * * %#{1.5|2.5|3.5|6|10}";
  in "SE\_\$2\_%*u\_%*u\_%*u\_%*s\_%*u\_%*u"
}

#Qn_set {
#  extraInput = ignore;
#  out "SE \$2 * * %.2f";
#  in "SE\_\$2\_%*u\_%*u\_%*u\_%*f\_%*u\_%*u"
#}

kubic_set {
  extraInput = ignore;
  out "SE \$2 *** %u";
  in "SE\_\$2\_%*u\_%*u\_%*u\_%*s\_%*u\_%*u"
}

liter_set {
  extraInput = ignore;
  out "SE \$2 **** %u";
  in "SE\_\$2\_%*u\_%*u\_%*u\_%*s\_%*u\_%*u";

  @init{
   out "SE \$2";
   in "SE\_\$2\_%*u\_"
              "%(\$1:\$2:min_set.VAL)u\_"
              "%(\$1:\$2:max_set.VAL)u\_"
              "%(\$1:\$2:Qn_set.VAL)#{1.5N=2|2.5=1|1.5=0|10.N=3|10.0}\_"
              "%(\$1:\$2:kubic_set.VAL)u\_"
              "%u "; # last is Liter
  }
}

